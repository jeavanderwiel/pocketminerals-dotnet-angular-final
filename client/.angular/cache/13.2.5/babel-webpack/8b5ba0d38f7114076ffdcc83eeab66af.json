{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { HttpEventType } from '@angular/common/http';\nimport { Component, Input } from '@angular/core';\nlet EditProductPhotosComponent = class EditProductPhotosComponent {\n  constructor(adminService, toast) {\n    this.adminService = adminService;\n    this.toast = toast;\n    this.progress = 0;\n    this.addPhotoMode = false;\n  }\n\n  ngOnInit() {}\n\n  uploadFile(file) {\n    this.adminService.uploadImage(file, this.product.id).subscribe(event => {\n      switch (event.type) {\n        case HttpEventType.UploadProgress:\n          this.progress = Math.round(event.loaded / event.total * 100);\n          break;\n\n        case HttpEventType.Response:\n          this.product = event.body;\n          setTimeout(() => {\n            this.progress = 0;\n            this.addPhotoMode = false;\n          }, 1500);\n      }\n    }, error => {\n      if (error.errors) {\n        this.toast.error(error.errors[0]);\n      } else {\n        this.toast.error('Problem uploading image');\n      }\n\n      this.progress = 0;\n    });\n  }\n\n  deletePhoto(photoId) {\n    this.adminService.deleteProductPhoto(photoId, this.product.id).subscribe(() => {\n      const photoIndex = this.product.photos.findIndex(x => x.id === photoId);\n      this.product.photos.splice(photoIndex, 1);\n    }, error => {\n      this.toast.error('Problem deleting photo');\n      console.log(error);\n    });\n  }\n\n  setMainPhoto(photoId) {\n    this.adminService.setMainPhoto(photoId, this.product.id).subscribe(product => {\n      this.product = product;\n    });\n  }\n\n};\n\n__decorate([Input()], EditProductPhotosComponent.prototype, \"product\", void 0);\n\nEditProductPhotosComponent = __decorate([Component({\n  selector: 'app-edit-product-photos',\n  templateUrl: './edit-product-photos.component.html',\n  styleUrls: ['./edit-product-photos.component.scss']\n})], EditProductPhotosComponent);\nexport { EditProductPhotosComponent };","map":null,"metadata":{},"sourceType":"module"}