{"ast":null,"code":"import { ShopParams } from '../shared/models/shopParams';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./shop.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"../shared/components/paging-header/paging-header.component\";\nimport * as i5 from \"./product-item/product-item.component\";\nimport * as i6 from \"../shared/components/pager/pager.component\";\nconst _c0 = [\"search\"];\n\nfunction ShopComponent_ng_container_3_option_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const sort_r7 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"selected\", ctx_r4.shopParams.sort === sort_r7.value)(\"value\", sort_r7.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sort_r7.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_li_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵlistener(\"click\", function ShopComponent_ng_container_3_li_8_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const brand_r8 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return ctx_r9.onBrandSelected(brand_r8.id);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const brand_r8 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", brand_r8.id === ctx_r5.shopParams.brandId);\n    i0.ɵɵproperty(\"value\", brand_r8.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", brand_r8.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\", 18);\n    i0.ɵɵlistener(\"click\", function ShopComponent_ng_container_3_li_12_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const type_r11 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.onTypeSelected(type_r11.id);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const type_r11 = ctx.$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"active\", type_r11.id === ctx_r6.shopParams.typeId);\n    i0.ɵɵproperty(\"value\", type_r11.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", type_r11.name, \" \");\n  }\n}\n\nfunction ShopComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h5\", 10);\n    i0.ɵɵtext(2, \"Sort\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"select\", 11);\n    i0.ɵɵlistener(\"change\", function ShopComponent_ng_container_3_Template_select_change_3_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.onSortSelected($event.target.value);\n    });\n    i0.ɵɵtemplate(4, ShopComponent_ng_container_3_option_4_Template, 2, 3, \"option\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h5\", 13);\n    i0.ɵɵtext(6, \"Locations\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ul\", 14);\n    i0.ɵɵtemplate(8, ShopComponent_ng_container_3_li_8_Template, 2, 4, \"li\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h5\", 13);\n    i0.ɵɵtext(10, \"Types\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"ul\", 16);\n    i0.ɵɵtemplate(12, ShopComponent_ng_container_3_li_12_Template, 2, 4, \"li\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.sortOptions);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.brands);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.types);\n  }\n}\n\nfunction ShopComponent_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"input\", 20, 21);\n    i0.ɵɵlistener(\"keyup.enter\", function ShopComponent_div_7_Template_input_keyup_enter_1_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.onSearch();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_7_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.onSearch();\n    });\n    i0.ɵɵtext(4, \"Search\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 23);\n    i0.ɵɵlistener(\"click\", function ShopComponent_div_7_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.onReset();\n    });\n    i0.ɵɵtext(6, \"Reset\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ShopComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵelement(1, \"app-product-item\", 25);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const product_r21 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"product\", product_r21);\n  }\n}\n\nfunction ShopComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 26)(1, \"app-pager\", 27);\n    i0.ɵɵlistener(\"pageChanged\", function ShopComponent_div_10_Template_app_pager_pageChanged_1_listener($event) {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext();\n      return ctx_r22.onPageChanged($event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"pageSize\", ctx_r3.shopParams.pageSize)(\"totalCount\", ctx_r3.totalCount)(\"pageNumber\", ctx_r3.shopParams.pageNumber);\n  }\n}\n\nexport let ShopComponent = /*#__PURE__*/(() => {\n  class ShopComponent {\n    constructor(shopService) {\n      this.shopService = shopService;\n      this.sortOptions = [{\n        name: 'Alphabetical',\n        value: 'name'\n      }, {\n        name: 'Price: Low to high',\n        value: 'priceAsc'\n      }, {\n        name: 'Price: High to low',\n        value: 'priceDesc'\n      }];\n      this.shopParams = this.shopService.getShopParams();\n    }\n\n    ngOnInit() {\n      this.getProducts(true);\n      this.getBrands();\n      this.getTypes();\n    }\n\n    getProducts(useCache = false) {\n      this.shopService.getProducts(useCache).subscribe(response => {\n        this.products = response.data;\n        this.totalCount = response.count;\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    getBrands() {\n      this.shopService.getBrands().subscribe(response => {\n        this.brands = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    getTypes() {\n      this.shopService.getTypes().subscribe(response => {\n        this.types = [{\n          id: 0,\n          name: 'All'\n        }, ...response];\n      }, error => {\n        console.log(error);\n      });\n    }\n\n    onBrandSelected(brandId) {\n      const params = this.shopService.getShopParams();\n      params.brandId = brandId;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onTypeSelected(typeId) {\n      const params = this.shopService.getShopParams();\n      params.typeId = typeId;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onSortSelected(sort) {\n      const params = this.shopService.getShopParams();\n      params.sort = sort;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onPageChanged(event) {\n      const params = this.shopService.getShopParams();\n\n      if (params.pageNumber !== event) {\n        params.pageNumber = event;\n        this.shopService.setShopParams(params);\n        this.getProducts(true);\n      }\n    }\n\n    onSearch() {\n      const params = this.shopService.getShopParams();\n      params.search = this.searchTerm.nativeElement.value;\n      params.pageNumber = 1;\n      this.shopService.setShopParams(params);\n      this.getProducts();\n    }\n\n    onReset() {\n      this.searchTerm.nativeElement.value = '';\n      this.shopParams = new ShopParams();\n      this.shopService.setShopParams(this.shopParams);\n      this.getProducts();\n    }\n\n  }\n\n  ShopComponent.ɵfac = function ShopComponent_Factory(t) {\n    return new (t || ShopComponent)(i0.ɵɵdirectiveInject(i1.ShopService));\n  };\n\n  ShopComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ShopComponent,\n    selectors: [[\"app-shop\"]],\n    viewQuery: function ShopComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchTerm = _t.first);\n      }\n    },\n    decls: 11,\n    vars: 7,\n    consts: [[1, \"container\", \"mt-5\"], [1, \"row\"], [1, \"col-3\"], [4, \"ngIf\"], [1, \"col-9\"], [1, \"d-flex\", \"justify-content-between\", \"align-items-center\", \"pb-2\"], [3, \"totalCount\", \"pageNumber\", \"pageSize\"], [\"class\", \"d-flex mt-2\", 4, \"ngIf\"], [\"class\", \"col-4 mb-4\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"d-flex justify-content-center\", 4, \"ngIf\"], [1, \"text-warning\", \"ms-3\", \"mt-3\", \"mb-4\"], [1, \"form-select\", \"mb-4\", 3, \"change\"], [3, \"selected\", \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-warning\", \"ms-3\"], [1, \"list-group\", \"mb-3\"], [\"class\", \"list-group-item\", 3, \"active\", \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"list-group\", \"my-3\"], [3, \"selected\", \"value\"], [1, \"list-group-item\", 3, \"value\", \"click\"], [1, \"d-flex\", \"mt-2\"], [\"type\", \"text\", \"placeholder\", \"Search\", 1, \"form-control\", \"me-2\", 3, \"keyup.enter\"], [\"search\", \"\"], [1, \"btn\", \"btn-outline-primary\", \"my-2\", 3, \"click\"], [1, \"btn\", \"btn-outline-success\", \"ms-2\", \"my-2\", 3, \"click\"], [1, \"col-4\", \"mb-4\"], [3, \"product\"], [1, \"d-flex\", \"justify-content-center\"], [3, \"pageSize\", \"totalCount\", \"pageNumber\", \"pageChanged\"]],\n    template: function ShopComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"section\", 2);\n        i0.ɵɵtemplate(3, ShopComponent_ng_container_3_Template, 13, 3, \"ng-container\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"section\", 4)(5, \"div\", 5);\n        i0.ɵɵelement(6, \"app-paging-header\", 6);\n        i0.ɵɵtemplate(7, ShopComponent_div_7_Template, 7, 0, \"div\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 1);\n        i0.ɵɵtemplate(9, ShopComponent_div_9_Template, 2, 1, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(10, ShopComponent_div_10_Template, 2, 3, \"div\", 9);\n        i0.ɵɵelementEnd()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.types && ctx.brands);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"totalCount\", ctx.totalCount)(\"pageNumber\", ctx.shopParams.pageNumber)(\"pageSize\", ctx.shopParams.pageSize);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.products);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.products);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.totalCount > 0);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i4.PagingHeaderComponent, i5.ProductItemComponent, i6.PagerComponent],\n    styles: [\".list-group-item[_ngcontent-%COMP%]{cursor:pointer;border:none;padding:10px 20px;font-size:1.1em}.list-group-item[_ngcontent-%COMP%]:focus{outline:none}.list-group-item.active[_ngcontent-%COMP%]{border-radius:10px}.list-group-item[_ngcontent-%COMP%]:not(.active):hover{color:#fff;background-color:#e95620b4;border-radius:10px}\"]\n  });\n  return ShopComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}